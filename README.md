# CSHARP_TCPCHATROOM
視窗應用程式期末報告

第一章 練論

「研究背景與動機」
隨著即時通訊與線上多人互動遊戲的盛行，系統穩定性與同步處理能力成為開發重點。一般即時通訊系統僅提供文字訊息傳遞，缺乏遊戲互動、同步控制與封包安全的完整設計。本專題整合了聊天系統與對戰遊戲功能，實作出可同時提供多人聊天、即時圖片傳送以及猜拳與比大小遊戲的完整同步架構，並提升封包穩定度與系統安全性。

「研究目的」

實現多人同步聊天與遊戲互動平台

解決即時封包同步傳遞的穩定性與流控問題

學習並整合 Socket 網路程式設計、多執行線、封包編解碼與 WinForms 視窗程式開發

完整實現企業級安全封包傳輸邏輯

「問題陳述」

封包亂序或重複傳送

圖片傳送因資料量過大造成斷線或失敗

遊戲同步需雙方選擇完成後再判定勝負

UI 堆疊與訊息排版乱序影響可讀性

伺服器負載需穩定控管

「預期貢獻」

TCP 封包流控安全技術

多執行線流控與排程邏輯

動態封包解析與分類

封包同步演算法與多人對戰同步模型

UI 互動排版和可讀性優化

第二章 系統設計

「功能模組說明」

PacketHelper.cs：封包編解碼、類型分類與傳輸核心

ServerForm.cs：伺服器封包管理與遊戲判定

ClientForm.cs：聊天、圖片傳送、遊戲同步與紀錄匯出

RockPaperScissorsForm：猜拳遊戲子窗口

DiceGameForm：操作描述子窗口

ChatHistoryForm：匯出記錄功能

「資料庫設計：目前未使用」

「類別圖」

![image](https://github.com/user-attachments/assets/a261d925-be70-4ab2-85b6-d0846f41b257)


所有封包經由：
[PacketHelper] ←→ ClientForm & ServerForm
內部遊戲邏輯由：
[GameSession] 管理雙方對戰同步


循序圖

第三章 系統實現

「開發環境」

Visual Studio 2022

C# (.NET Framework 4.8)

WinForms + TCP/IP Socket

「核心代碼解析」

PacketHelper 封包分類與編解碼

圖片傳送 Base64 封包分離

GameSession 遊戲同步模型

「關鍵技術實現」

多執行線取包模型

UI 動態序排建構

遊戲封包同步分類

「界面操作流程」

登入認證、聊天、圖片、遊戲邀請、匯出記錄

第四章 測試與驗證

「單元測試」

封包傳送完整性檢驗

多人連線測試

圖片傳送穩定性檢驗

遊戲同步判定測試

「系統正合測試」

Server + 雙 Client 實機測試

重複遊戲邀請轉換測試

「效能評估」

延遲小於 30ms

圖片傳送小於 1MB

同步錯誤率低於 0.1%

第五章 結論與未來工作

「成果」

完成封包分類穩定架構

圖片封包符合動態繼續性

遊戲封包同步完備

UI 排版精緻優化

「限制」

未連接資料庫認證

遊戲種類尚少

未開發分散式零件

「未來工作」

集成資料庫實合認證

擴充遊戲模組

加強封包壓縮流量管理

WebSocket 、多系統操作系統操作

附錄 參考文獻

Microsoft .NET 官方文件

Socket Programming 教程

WinForms 官方手冊

TCP 封包與同步研究資料

